const t=document.querySelector(".gallery");let e="https://image.tmdb.org/t/p/w500/";!async function(a){try{const s=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=14ce8915ef52d801924d89668f2ca827").then((t=>{if(!t.ok)throw new Error(t.status);return t.json()})).then((t=>t.genres)),o=await(i=a,fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=14ce8915ef52d801924d89668f2ca827&page=${i}`).then((t=>{if(!t.ok)throw new Error(t.status);return t.json()}))).then((t=>t.results));n=s,o.forEach((t=>{const e=t.genre_ids.map((t=>{const e=n.find((e=>e.id===t));return e?e.name:"Unknown"}));t.genre_name=e.length<3?e.join(", "):`${e[0]}, ${e[1]}, other`})),function(t){t.forEach((t=>{t.poster_path||(e="./default-img.jpg"),t.release_date||(t.release_date=""),(t.vote_average<0||t.vote_average>10)&&(t.vote_average=0)}))}(o),function(a){const n=a.map((({id:t,poster_path:a,title:n,genre_name:i,release_date:s,vote_average:o})=>{const l=s.slice(0,4);o.toFixed(1);return`\n            <li class="item" data-id="${t}">\n                <a class="item__link" href="">\n                <div class="item__img-frame">\n                    <img\n                    class="item__img"\n                    data-id="${t}"\n                    src=${e+a}\n                    alt="${n}"\n                    loading="lazy"\n                    />\n                </div>\n                <div class="item__text-frame">\n                    <h3 class="item__text title">${n}</h3>\n                    <h3 class="item__text">${i} | ${l}</h3>\n                </div>\n                </a>\n            </li>\n            `})).join("");t.innerHTML=n}(o)}catch(e){t.innerHTML="\n  <section>\n      <p>Error</p>\n      <p>Oops, something went wrong. Please try again later.</p>\n    </section>"}var n,i}(1);let a;const n=t=>document.querySelector(t);function i(){document.removeEventListener("keydown",s),n(".backdrop").classList.add("is-hidden"),n("body").classList.remove("no-scroll")}function s(t){"Escape"===t.code&&i()}n(".gallery").addEventListener("click",(function(t){if(t.preventDefault(),!t.target.closest("li").classList.contains("item")||t.target.classList.contains("gallery"))return;(e=t.target.closest("li").dataset.id,fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=14ce8915ef52d801924d89668f2ca827`).then((t=>{if(!t.ok)throw new Error(t.status);return t.json()}))).then((t=>{!function({id:t,poster_path:e,original_title:i,popularity:s,vote_average:o,vote_count:l,genres:c,overview:r}){const d=c.map((t=>t.name)).join(", "),_=Math.round(s);a="https://i.ibb.co/3NkZfz9/moive1.jpg"!==e?"https://image.tmdb.org/t/p/w500/"+e:"https://i.ibb.co/3NkZfz9/moive1.jpg";const m=`\n    <div class="modal__container">\n                <div class="modal__img-wrap">\n                    <img class="modal__img" src="${a}" alt="${i}">\n                </div>\n                <div class="modal__about-movie">\n                    <h3 class="modal__title" data-id="${t}">${i}</h3>\n                    <div class="modal__text-wrap">\n                        <ul>\n                            <li class="modal__text-characteristic">Vote / Votes</li>\n                            <li class="modal__text-characteristic-value"><span class="vote average">${o}</span> / <span class="vote count">${l}</span></li>\n                        </ul>\n                        <ul>\n                            <li class="modal__text-characteristic">Popularity</li>\n                            <li class="modal__text-characteristic-value">${_}</li>\n                        </ul>\n                        <ul>\n                            <li class="modal__text-characteristic">Original Title</li>\n                            <li class="modal__text-characteristic-value">${i}</li>\n                        </ul>\n                        <ul>\n                            <li class="modal__text-characteristic">Genre</li>\n                            <li class="modal__text-characteristic-value">${d}</li>\n                        </ul>\n                    </div>\n                    <div class="modal__overview-wrap">\n                        <h3 class="modal__overview-title">About</h3>\n                        <p class="modal__overview-text">${r}</p>\n                    </div>\n                    <div class="modal__btn-wrap">\n                        <button class="modal__btn w" type="button">add to Watched</button>\n                        <button class="modal__btn q" type="button">add to queue</button>\n                    </div>\n                </div>\n            </div>\n    `;n(".modal__window").innerHTML=m}(t)})),document.addEventListener("keydown",s),n(".backdrop").classList.remove("is-hidden"),n("body").classList.add("no-scroll");var e})),n(".modal__btn-close").addEventListener("click",i),n(".backdrop").addEventListener("click",(function(t){t.target.classList.contains("backdrop")&&i()}));
//# sourceMappingURL=library.d4106122.js.map
