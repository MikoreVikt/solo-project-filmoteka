{"mappings":"AAGA,IACIA,EAyCJ,SAASC,EAAoBC,GAC3B,OAAOA,EACJC,KAAI,EAACC,GAAEA,EAAEC,YAAEA,EAAWC,eAAEA,EAAcC,aAAEA,EAAYC,OAAEA,MACrD,MAAMC,EAASF,EAAaG,MAAM,EAAG,GACrCV,EA/CqB,sCA+CMK,EAC3B,MAAMM,EAAS,uCACeP,iLAKTA,2BACLJ,2BACCM,wKAKwBA,kDACNE,OAAYC,8DA1DvC,IAAAG,KA8DF,WA9DcC,SAASC,cAAcF,IA8DzBG,mBAAmB,YAAaJ,EAAO,IAE1DK,KAAK,G,CAGHC,eAAeC,EAAcC,GAClC,MAAMC,QApDCC,MAAM,0FACVC,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,MAAM,IAEvBC,OAAMC,GAASA,EAAMH,SA6CcJ,MAAKpB,GAAQA,EAAKM,SAClDsB,QAjEUC,EAiEgBZ,EAhEzBE,MAAM,iGAA0DU,KACpET,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,MAAM,IAEvBC,OAAMC,GAASA,EAAMH,UAyDcJ,MAAKpB,GAAQA,EAAK8B,UAjE1D,IAAkBD,GAsBlB,SAAuBD,EAAUV,GAC/BU,EAASG,SAAQC,IACf,MAAMC,EAAQD,EAAKE,UAAUjC,KAAIC,IAC/B,MAAMiC,EAAQjB,EAAUkB,MAAKC,GAASA,EAAMnC,KAAOA,IACnD,OAAOiC,EAAQA,EAAMG,KAAO,SAAS,IAEvCN,EAAK1B,OACH2B,EAAMM,OAAS,EACXN,EAAMnB,KAAK,MACX,GAAGmB,EAAM,OAAOA,EAAM,cAAc,G,CAmC5CO,CAAcZ,EAAUV,GACxBnB,EAAoB6B,E,CArEtBZ,EALW,GCAX,IAAIyB,EAEJ,MAAMC,EAAQhC,GAAYC,SAASC,cAAcF,GAsCjD,SAASiC,IACPhC,SAASiC,oBAAoB,UAAWC,GACxCH,EAAM,aAAaI,UAAUC,IAAI,aACjCL,EAAM,QAAQI,UAAUE,OAAO,aAC/BN,EAAM,kBAAkBO,UAAY,E,CAStC,SAASJ,EAAWK,GACH,WAAXA,EAAEC,MACJR,G,CAnDJD,EAAM,YAAYU,iBAAiB,SAenC,SAAuBF,GAErB,GADAA,EAAEG,kBAEEH,EAAEI,OAAOC,QAAQ,QAAUL,EAAEI,OAAOR,UAAUU,SAAS,SACzDN,EAAEI,OAAOR,UAAUU,SAAS,WAE5B,QAjBqBtD,EAmBPgD,EAAEI,OAAOC,QAAQ,MAAME,QAAQvD,GAlBxCiB,MAAM,sCAAqBjB,8CAC/BkB,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,MAAM,IAEvBC,OAAMC,GAAS+B,QAAQC,IAAIhC,MAYLP,MAAKpB,KA+BhC,UAA4BE,GAC1BA,EAAEE,eACFA,EAAcwD,SACdA,EAAQzD,YACRA,EAAW0D,WACXA,EAAUC,aACVA,EAAYC,WACZA,EAAUzD,OACVA,IAEAmC,EAtEyB,sCAsEEtC,EAC3B,MAAM6D,EAAUC,KAAKC,MAAML,GACrBM,EAAa7D,EAAOL,KAAIoC,GAASA,EAAMC,OAAMxB,KAAK,MAClDL,EAAS,iJAGkCgC,WAAarC,wIAGRF,MAAOE,uRAIuC0D,uCAAkDC,4OAI7EC,yOAIA5D,gOAIA+D,4PAKjBP,6VASxDlB,EAAM,kBAAkBO,UAAYxC,C,CA/ElC2D,CAAmBpE,EAAK,IAM1BW,SAASyC,iBAAiB,UAAWP,GACrCH,EAAM,aAAaI,UAAUE,OAAO,aACpCN,EAAM,QAAQI,UAAUC,IAAI,aA7B9B,IAAyB7C,C,IAHzBwC,EAAM,qBAAqBU,iBAAiB,QAAST,GACrDD,EAAM,aAAaU,iBAAiB,SAyCpC,SAAyBF,GACnBA,EAAEmB,gBAAkBnB,EAAEI,QACxBX,G,IClDJ,MAAM2B,EAAQ5D,GAAYC,SAASC,cAAcF,GACjD,IAAI6D,EAAO,EA6CX,SAASC,IACP,MAAMC,EAAUH,EAAM,yBAAyBI,kBACzCC,EAASL,EAAM,yBAAyBM,iBACxCC,EAAaC,OAAOL,EAAQhB,QAAQsB,OAAS,EAC7CC,EAAaH,EAAa,EAChC,GACEJ,EAAQ3B,UAAUU,SAAS,iBACO,IAAlCsB,OAAOL,EAAQhB,QAAQsB,OACvB,CACAJ,EAAO3B,SACP,MAAMiC,EAAgB,iEAAiEJ,MAAeG,aACtGV,EAAM,yBAAyBzD,mBAC7B,aACAoE,E,EAKN,SAASC,IACP,MAAMT,EAAUH,EAAM,yBAAyBI,kBACzCC,EAASL,EAAM,yBAAyBM,iBACxCO,EAAaL,OAAOH,EAAOlB,QAAQsB,OAAS,EAC5CK,EAAaN,OAAOK,GAAcL,OAAO,GAC/C,GAAIH,EAAO7B,UAAUU,SAAS,gBAAiB,CAC7CiB,EAAQzB,SACR,MAAMqC,EAAgB,iEAAiEF,MAAeC,aACtGd,EAAM,yBAAyBzD,mBAC7B,YACAwE,E,EAKN,SAASC,IACc,IAAjBR,OAAOP,GACTD,EAAM,yBAAyBxB,UAAUC,IAAI,cAE7CuB,EAAM,yBAAyBxB,UAAUE,OAAO,a,CAhFpDsB,EAAM,yBAAyBlB,iBAAiB,SA6BhD,SAAuBF,GACrBoB,EAAM,YAAYrB,UAAY,GAC9B,MAAMsC,EAAmB5E,SAASC,cAAc,iBAC5C2E,GACFA,EAAiBzC,UAAUE,OAAO,gBAEpCE,EAAEI,OAAOR,UAAUC,IAAI,gBACvBwB,EAAOrB,EAAEI,OAAOkC,YAChBF,IACAd,IACAU,IACAlE,EAAcuD,E,IAvChBD,EAAM,yBAAyBlB,iBAAiB,SAGhD,WACEkB,EAAM,YAAYrB,UAAY,GAC9B,MAAMsC,EAAmB5E,SAASC,cAAc,iBAC5C2E,GACFA,EAAiBzC,UAAUE,OAAO,gBAEpCuC,EAAiBE,uBAAuB3C,UAAUC,IAAI,gBACtDwB,GAAQ,EACRe,IACAd,IACAxD,EAAcuD,E,IAZhBD,EAAM,yBAAyBlB,iBAAiB,SAehD,WACEkB,EAAM,YAAYrB,UAAY,GAC9B,MAAMsC,EAAmB5E,SAASC,cAAc,iBAC5C2E,GACFA,EAAiBzC,UAAUE,OAAO,gBAEpCuC,EAAiBG,mBAAmB5C,UAAUC,IAAI,gBAClD,MAAM4C,EAAUb,OAAOP,GAAQ,EAC/BW,IACAlE,EAAc2E,E","sources":["src/js/gallery/gallery-render.js","src/js/movie-card/movie-card.js","src/js/pagination/pagination.js"],"sourcesContent":["const BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = '14ce8915ef52d801924d89668f2ca827';\nconst HTTPS_IMG_ORIGINAL = 'https://image.tmdb.org/t/p/original';\nlet page = 1;\nlet src;\n\nconst getEl = selector => document.querySelector(selector);\n\ncreateGallery(page);\n\nfunction fetchAPI(page) {\n  return fetch(`${BASE_URL}/trending/movie/day?api_key=${API_KEY}&page=${page}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .catch(error => error.status);\n}\n\nfunction fetchGenres() {\n  return fetch(`${BASE_URL}/genre/movie/list?api_key=${API_KEY}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .catch(error => error.status);\n}\n\nfunction getGenreNames(filmsArr, genresArr) {\n  filmsArr.forEach(film => {\n    const names = film.genre_ids.map(id => {\n      const objId = genresArr.find(genre => genre.id === id);\n      return objId ? objId.name : 'Unknown';\n    });\n    film.genres =\n      names.length < 3\n        ? names.join(', ')\n        : `${names[0]}, ${names[1]} and other`;\n  });\n}\n\nfunction createGalleryMarkup(data) {\n  return data\n    .map(({ id, poster_path, original_title, release_date, genres }) => {\n      const relise = release_date.slice(0, 4);\n      src = HTTPS_IMG_ORIGINAL + poster_path;\n      const markup = `\n        <li class=\"item\" data-id=\"${id}\">\n            <a class=\"item__link\" href=\"\">\n            <div class=\"item__img-frame\">\n                <img\n                class=\"item__img\"\n                data-id=\"${id}\"\n                src=${src}\n                alt=\"${original_title}\"\n                loading=\"lazy\"\n                />\n            </div>\n            <div class=\"item__text-frame\">\n                <h3 class=\"item__text title\">${original_title}</h3>\n                <h3 class=\"item__text\">${genres} | ${relise}</h3>\n            </div>\n            </a>\n        </li>`;\n      getEl('.gallery').insertAdjacentHTML('beforeend', markup);\n    })\n    .join('');\n}\n\nexport async function createGallery(page) {\n  const genresArr = await fetchGenres().then(data => data.genres);\n  const filmsArr = await fetchAPI(page).then(data => data.results);\n  getGenreNames(filmsArr, genresArr);\n  createGalleryMarkup(filmsArr);\n}\n","const BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = '14ce8915ef52d801924d89668f2ca827';\nconst HTTPS_IMG_ORIGINAL = 'https://image.tmdb.org/t/p/original';\nlet src;\n\nconst getEl = selector => document.querySelector(selector);\n\ngetEl('.gallery').addEventListener('click', onPosterClick);\ngetEl('.modal__btn-close').addEventListener('click', closeModal);\ngetEl('.backdrop').addEventListener('click', onBackdropClick);\n\nfunction getMovieDetails(id) {\n  return fetch(`${BASE_URL}/movie/${id}?api_key=${API_KEY}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .catch(error => console.log(error));\n}\n\nfunction onPosterClick(e) {\n  e.preventDefault();\n  if (\n    (!e.target.closest('li') && !e.target.classList.contains('item')) ||\n    e.target.classList.contains('gallery')\n  ) {\n    return;\n  }\n  const idValue = e.target.closest('li').dataset.id;\n  getMovieDetails(idValue).then(data => {\n    createPosterMarkup(data);\n  });\n  openModal();\n}\n\nfunction openModal() {\n  document.addEventListener('keydown', onEscPress);\n  getEl('.backdrop').classList.remove('is-hidden');\n  getEl('body').classList.add('no-scroll');\n}\n\nfunction closeModal() {\n  document.removeEventListener('keydown', onEscPress);\n  getEl('.backdrop').classList.add('is-hidden');\n  getEl('body').classList.remove('no-scroll');\n  getEl('.modal__window').innerHTML = '';\n}\n\nfunction onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    closeModal();\n  }\n}\n\nfunction onEscPress(e) {\n  if (e.code === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction createPosterMarkup({\n  id,\n  original_title,\n  overview,\n  poster_path,\n  popularity,\n  vote_average,\n  vote_count,\n  genres,\n}) {\n  src = HTTPS_IMG_ORIGINAL + poster_path;\n  const popular = Math.round(popularity);\n  const genresName = genres.map(genre => genre.name).join(', ');\n  const markup = `\n            <div class=\"modal__container\">\n                <div class=\"modal__img-wrap\">\n                    <img class=\"modal__img\" src=\"${src}\" alt=\"${original_title}\">\n                </div>\n                <div class=\"modal__about-movie\">\n                    <h3 class=\"modal__title\" data-id=\"${id}\">${original_title}</h3>\n                    <div class=\"modal__text-wrap\">\n                        <ul>\n                            <li class=\"modal__text-characteristic\">Vote / Votes</li>\n                            <li class=\"modal__text-characteristic-value\"><span class=\"vote average\">${vote_average}</span> / <span class=\"vote count\">${vote_count}</span></li>\n                        </ul>\n                        <ul>\n                            <li class=\"modal__text-characteristic\">Popularity</li>\n                            <li class=\"modal__text-characteristic-value\">${popular}</li>\n                        </ul>\n                        <ul>\n                            <li class=\"modal__text-characteristic\">Original Title</li>\n                            <li class=\"modal__text-characteristic-value\">${original_title}</li>\n                        </ul>\n                        <ul>\n                            <li class=\"modal__text-characteristic\">Genre</li>\n                            <li class=\"modal__text-characteristic-value\">${genresName}</li>\n                        </ul>\n                    </div>\n                    <div class=\"modal__overview-wrap\">\n                        <h3 class=\"modal__overview-title\">About</h3>\n                        <p class=\"modal__overview-text\">${overview}</p>\n                    </div>\n                    <div class=\"modal__btn-wrap\">\n                        <button class=\"modal__btn w\" type=\"button\">add to Watched</button>\n                        <button class=\"modal__btn q\" type=\"button\">add to queue</button>\n                    </div>\n                </div>\n            </div>\n      `;\n  getEl('.modal__window').innerHTML = markup;\n}\n","import { createGallery } from '../gallery/gallery-render';\n\nconst getEl = selector => document.querySelector(selector);\nlet page = 1;\n\ngetEl('.pagination__btn-wrap').addEventListener('click', clickOnBtnNum);\ngetEl('.pagination__btn.prev').addEventListener('click', clickOnArrowBtnPrev);\ngetEl('.pagination__btn.next').addEventListener('click', clickOnArrowBtnNext);\n\nfunction clickOnArrowBtnPrev() {\n  getEl('.gallery').innerHTML = '';\n  const currentActiveBtn = document.querySelector('.current-page');\n  if (currentActiveBtn) {\n    currentActiveBtn.classList.remove('current-page');\n  }\n  currentActiveBtn.previousElementSibling.classList.add('current-page');\n  page -= 1;\n  validation();\n  createPrevBtn();\n  createGallery(page);\n}\n\nfunction clickOnArrowBtnNext() {\n  getEl('.gallery').innerHTML = '';\n  const currentActiveBtn = document.querySelector('.current-page');\n  if (currentActiveBtn) {\n    currentActiveBtn.classList.remove('current-page');\n  }\n  currentActiveBtn.nextElementSibling.classList.add('current-page');\n  const pageNum = Number(page) + 1;\n  createNextBtn();\n  createGallery(pageNum);\n}\n\nfunction clickOnBtnNum(e) {\n  getEl('.gallery').innerHTML = '';\n  const currentActiveBtn = document.querySelector('.current-page');\n  if (currentActiveBtn) {\n    currentActiveBtn.classList.remove('current-page');\n  }\n  e.target.classList.add('current-page');\n  page = e.target.textContent;\n  validation();\n  createPrevBtn();\n  createNextBtn();\n  createGallery(page);\n}\n\nfunction createPrevBtn() {\n  const firstEl = getEl('.pagination__btn-wrap').firstElementChild;\n  const lastEl = getEl('.pagination__btn-wrap').lastElementChild;\n  const prevBtnIdx = Number(firstEl.dataset.index) - 1;\n  const prevBtnNum = prevBtnIdx + 1;\n  if (\n    firstEl.classList.contains('current-page') &&\n    Number(firstEl.dataset.index) !== 0\n  ) {\n    lastEl.remove();\n    const prevBtnMarkup = `<button class=\"pagination__btn num\" tupe=\"button\" data-index=\"${prevBtnIdx}\">${prevBtnNum}</button>`;\n    getEl('.pagination__btn-wrap').insertAdjacentHTML(\n      'afterbegin',\n      prevBtnMarkup\n    );\n  }\n}\n\nfunction createNextBtn() {\n  const firstEl = getEl('.pagination__btn-wrap').firstElementChild;\n  const lastEl = getEl('.pagination__btn-wrap').lastElementChild;\n  const nextBtnIdx = Number(lastEl.dataset.index) + 1;\n  const nextBtnNum = Number(nextBtnIdx) + Number(1);\n  if (lastEl.classList.contains('current-page')) {\n    firstEl.remove();\n    const nextBtnMarkup = `<button class=\"pagination__btn num\" tupe=\"button\" data-index=\"${nextBtnIdx}\">${nextBtnNum}</button>`;\n    getEl('.pagination__btn-wrap').insertAdjacentHTML(\n      'beforeend',\n      nextBtnMarkup\n    );\n  }\n}\n\nfunction validation() {\n  if (Number(page) === 1) {\n    getEl('.pagination__btn.prev').classList.add('not-active');\n  } else {\n    getEl('.pagination__btn.prev').classList.remove('not-active');\n  }\n}\n"],"names":["$58a6b4b7e5ce1881$var$src","$58a6b4b7e5ce1881$var$createGalleryMarkup","data","map","id","poster_path","original_title","release_date","genres","relise","slice","markup","selector","document","querySelector","insertAdjacentHTML","join","async","$58a6b4b7e5ce1881$export$dac8b9bf675ebb55","page2","genresArr","fetch","then","response","ok","Error","status","json","catch","error","filmsArr","page1","results","forEach","film","names","genre_ids","objId","find","genre","name","length","$58a6b4b7e5ce1881$var$getGenreNames","$7c126d120175999e$var$src","$7c126d120175999e$var$getEl","$7c126d120175999e$var$closeModal","removeEventListener","$7c126d120175999e$var$onEscPress","classList","add","remove","innerHTML","e","code","addEventListener","preventDefault","target","closest","contains","dataset","console","log","overview","popularity","vote_average","vote_count","popular","Math","round","genresName","$7c126d120175999e$var$createPosterMarkup","currentTarget","$6077aa4079e9cd36$var$getEl","$6077aa4079e9cd36$var$page","$6077aa4079e9cd36$var$createPrevBtn","firstEl","firstElementChild","lastEl","lastElementChild","prevBtnIdx","Number","index","prevBtnNum","prevBtnMarkup","$6077aa4079e9cd36$var$createNextBtn","nextBtnIdx","nextBtnNum","nextBtnMarkup","$6077aa4079e9cd36$var$validation","currentActiveBtn","textContent","previousElementSibling","nextElementSibling","pageNum"],"version":3,"file":"library.4b8ffa6b.js.map"}