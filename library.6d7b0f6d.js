let e,t=1;const n=e=>document.querySelector(e);function a(){return fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=14ce8915ef52d801924d89668f2ca827").then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>e.status))}function r(e,t){e.forEach((e=>{const n=e.genre_ids.map((e=>{const n=t.find((t=>t.id===e));return n?n.name:"Unknown"}));e.genres=n.length<3?n.join(", "):`${n[0]}, ${n[1]} and other`}))}function o(t){return t.map((({id:t,poster_path:a,original_title:r,release_date:o,genres:c})=>{const s=o.slice(0,4);e="https://image.tmdb.org/t/p/original"+a;const l=`\n        <li class="item" data-id="${t}">\n            <a class="item__link" href="">\n            <div class="item__img-frame">\n                <img\n                class="item__img"\n                data-id="${t}"\n                src=${e}\n                alt="${r}"\n                loading="lazy"\n                />\n            </div>\n            <div class="item__text-frame">\n                <h3 class="item__text title">${r}</h3>\n                <h3 class="item__text">${c} | ${s}</h3>\n            </div>\n            </a>\n        </li>`;n(".gallery").insertAdjacentHTML("beforeend",l)})).join("")}async function c(e){e=localStorage.getItem("current-page-number")?localStorage.getItem("current-page-number"):1;const t=await a().then((e=>e.genres)),n=await(c=e,fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=14ce8915ef52d801924d89668f2ca827&page=${c}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>e.status))).then((e=>e.results));var c;r(n,t),o(n)}n(".header-logo").addEventListener("click",(function(){localStorage.removeItem("current-memory-search"),localStorage.removeItem("current-page-number"),t=1,c(t)})),c(t);const s=e=>document.querySelector(e);let l=Number(localStorage.getItem("current-page-number"))||1;function i(){const e=s(".pagination__btn-wrap").firstElementChild,t=s(".pagination__btn-wrap").lastElementChild,n=Number(e.dataset.index)-1,a=n+1;if(e.classList.contains("current-page")&&0!==Number(e.dataset.index)){t.remove();const e=`<button class="pagination__btn num" tupe="button" data-index="${n}">${a}</button>`;s(".pagination__btn-wrap").insertAdjacentHTML("afterbegin",e)}}function u(){const e=s(".pagination__btn-wrap").firstElementChild,t=s(".pagination__btn-wrap").lastElementChild,n=Number(t.dataset.index)+1,a=Number(n)+Number(1);if(t.classList.contains("current-page")){e.remove();const t=`<button class="pagination__btn num" tupe="button" data-index="${n}">${a}</button>`;s(".pagination__btn-wrap").insertAdjacentHTML("beforeend",t)}}function m(e){1===Number(e)?s(".pagination__btn.prev").classList.add("not-active"):s(".pagination__btn.prev").classList.remove("not-active")}function d(){const e=localStorage.getItem("current-page-number"),t=document.querySelectorAll(".pagination__btn.num"),n=document.querySelector(".current-page"),a=[...t].find((t=>Number(t.textContent)===Number(e)));n&&a&&(n.classList.remove("current-page"),a.classList.add("current-page"))}s(".pagination__btn-wrap").addEventListener("click",(function(e){s(".gallery").innerHTML="";const t=document.querySelector(".current-page");t&&t.classList.remove("current-page");e.target.classList.add("current-page"),l=e.target.textContent,localStorage.setItem("current-page-number",l),m(Number(localStorage.getItem("current-page-number"))||1),i(),u(),d(),localStorage.getItem("current-memory-search")?b(Number(localStorage.getItem("current-page-number"))||1,localStorage.getItem("current-memory-search")):c(Number(localStorage.getItem("current-page-number"))||1)})),s(".pagination__btn.prev").addEventListener("click",(function(){s(".gallery").innerHTML="";const e=document.querySelector(".current-page")||Number(localStorage.getItem("current-page-number"));e&&e.classList.remove("current-page");if(Number(e.textContent)!==Number(1)){const t=Number(e.textContent)-1;localStorage.setItem("current-page-number",t),e.previousElementSibling.classList.add("current-page")}else{const t=1;localStorage.setItem("current-page-number",t),e.classList.add("current-page")}m(Number(localStorage.getItem("current-page-number"))||1),i(),d(),localStorage.getItem("current-memory-search")?b(Number(localStorage.getItem("current-page-number"))||1,localStorage.getItem("current-memory-search")):c(Number(localStorage.getItem("current-page-number"))||1)})),s(".pagination__btn.next").addEventListener("click",(function(){s(".gallery").innerHTML="";const e=document.querySelector(".current-page")||Number(localStorage.getItem("current-page-number"));e&&e.classList.remove("current-page");e.nextElementSibling.classList.add("current-page");const t=Number(e.textContent)+1;localStorage.setItem("current-page-number",t),m(Number(localStorage.getItem("current-page-number"))||1),u(),d(),localStorage.getItem("current-memory-search")?b(Number(localStorage.getItem("current-page-number"))||1,localStorage.getItem("current-memory-search")):c(Number(localStorage.getItem("current-page-number"))||1)})),d(),m(l);let g,p;const _=e=>document.querySelector(e);async function b(e,t){_(".gallery").innerHTML="";const n=await a().then((e=>e.genres)),c=await(s=e,l=t,fetch(`https://api.themoviedb.org/3/search/movie?api_key=14ce8915ef52d801924d89668f2ca827&query=${l}&page=${s}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>e.status))).then((e=>e.results));var s,l;r(c,n),o(c)}_(".search-form").addEventListener("submit",(function(e){if(e.preventDefault(),g=1,localStorage.setItem("current-page-number",1),""===_(".search-form").elements.search.value)return;p=_(".search-form").elements.search.value,localStorage.setItem("current-memory-search",p);m(1),d(),b(1,p)}));let h;const v=e=>document.querySelector(e);function f(){document.removeEventListener("keydown",L),v(".backdrop").classList.add("is-hidden"),v("body").classList.remove("no-scroll"),v(".modal__window").innerHTML=""}function L(e){"Escape"===e.code&&f()}v(".gallery").addEventListener("click",(function(e){if(e.preventDefault(),!e.target.closest("li")&&!e.target.classList.contains("item")||e.target.classList.contains("gallery"))return;(t=e.target.closest("li").dataset.id,fetch(`https://api.themoviedb.org/3/movie/${t}?api_key=14ce8915ef52d801924d89668f2ca827`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>console.log(e)))).then((e=>{!function({id:e,original_title:t,overview:n,poster_path:a,popularity:r,vote_average:o,vote_count:c,genres:s}){h="https://image.tmdb.org/t/p/original"+a;const l=Math.round(r),i=s.map((e=>e.name)).join(", "),u=`\n            <div class="modal__container">\n                <div class="modal__img-wrap">\n                    <img class="modal__img" src="${h}" alt="${t}">\n                </div>\n                <div class="modal__about-movie">\n                    <h3 class="modal__title" data-id="${e}">${t}</h3>\n                    <div class="modal__text-wrap">\n                        <ul>\n                            <li class="modal__text-characteristic">Vote / Votes</li>\n                            <li class="modal__text-characteristic-value"><span class="vote average">${o}</span> / <span class="vote count">${c}</span></li>\n                        </ul>\n                        <ul>\n                            <li class="modal__text-characteristic">Popularity</li>\n                            <li class="modal__text-characteristic-value">${l}</li>\n                        </ul>\n                        <ul>\n                            <li class="modal__text-characteristic">Original Title</li>\n                            <li class="modal__text-characteristic-value">${t}</li>\n                        </ul>\n                        <ul>\n                            <li class="modal__text-characteristic">Genre</li>\n                            <li class="modal__text-characteristic-value">${i}</li>\n                        </ul>\n                    </div>\n                    <div class="modal__overview-wrap">\n                        <h3 class="modal__overview-title">About</h3>\n                        <p class="modal__overview-text">${n}</p>\n                    </div>\n                    <div class="modal__btn-wrap">\n                        <button class="modal__btn w" type="button">add to Watched</button>\n                        <button class="modal__btn q" type="button">add to queue</button>\n                    </div>\n                </div>\n            </div>\n      `;v(".modal__window").innerHTML=u}(e)})),document.addEventListener("keydown",L),v(".backdrop").classList.remove("is-hidden"),v("body").classList.add("no-scroll");var t})),v(".modal__btn-close").addEventListener("click",f),v(".backdrop").addEventListener("click",(function(e){e.currentTarget===e.target&&f()}));const y=e=>document.querySelector(e);let S;window.addEventListener("scroll",(function(){Math.round(document.documentElement.scrollTop)>230?S=setTimeout((()=>{setTimeout((()=>{Math.round(document.documentElement.scrollTop)>230&&y(".scroll__btn").classList.remove("is-hidden")}),1)}),1e3):(y(".scroll__btn").classList.add("is-hidden"),clearTimeout(S))})),y(".scroll__btn").addEventListener("click",(function(){y(".scroll__btn").classList.add("is-hidden"),document.documentElement.scrollTop>0&&window.scrollTo({top:0,left:0,behavior:"smooth"})}));
//# sourceMappingURL=library.6d7b0f6d.js.map
