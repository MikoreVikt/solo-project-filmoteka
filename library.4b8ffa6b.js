let t;function e(e){return e.map((({id:e,poster_path:n,original_title:a,release_date:i,genres:s})=>{const r=i.slice(0,4);t="https://image.tmdb.org/t/p/original"+n;const o=`\n        <li class="item" data-id="${e}">\n            <a class="item__link" href="">\n            <div class="item__img-frame">\n                <img\n                class="item__img"\n                data-id="${e}"\n                src=${t}\n                alt="${a}"\n                loading="lazy"\n                />\n            </div>\n            <div class="item__text-frame">\n                <h3 class="item__text title">${a}</h3>\n                <h3 class="item__text">${s} | ${r}</h3>\n            </div>\n            </a>\n        </li>`;var c;(c=".gallery",document.querySelector(c)).insertAdjacentHTML("beforeend",o)})).join("")}async function n(t){const n=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=14ce8915ef52d801924d89668f2ca827").then((t=>{if(!t.ok)throw new Error(t.status);return t.json()})).catch((t=>t.status)).then((t=>t.genres)),a=await(i=t,fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=14ce8915ef52d801924d89668f2ca827&page=${i}`).then((t=>{if(!t.ok)throw new Error(t.status);return t.json()})).catch((t=>t.status))).then((t=>t.results));var i;!function(t,e){t.forEach((t=>{const n=t.genre_ids.map((t=>{const n=e.find((e=>e.id===t));return n?n.name:"Unknown"}));t.genres=n.length<3?n.join(", "):`${n[0]}, ${n[1]} and other`}))}(a,n),e(a)}n(1);let a;const i=t=>document.querySelector(t);function s(){document.removeEventListener("keydown",r),i(".backdrop").classList.add("is-hidden"),i("body").classList.remove("no-scroll"),i(".modal__window").innerHTML=""}function r(t){"Escape"===t.code&&s()}i(".gallery").addEventListener("click",(function(t){if(t.preventDefault(),!t.target.closest("li")&&!t.target.classList.contains("item")||t.target.classList.contains("gallery"))return;(e=t.target.closest("li").dataset.id,fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=14ce8915ef52d801924d89668f2ca827`).then((t=>{if(!t.ok)throw new Error(t.status);return t.json()})).catch((t=>console.log(t)))).then((t=>{!function({id:t,original_title:e,overview:n,poster_path:s,popularity:r,vote_average:o,vote_count:c,genres:l}){a="https://image.tmdb.org/t/p/original"+s;const d=Math.round(r),u=l.map((t=>t.name)).join(", "),_=`\n            <div class="modal__container">\n                <div class="modal__img-wrap">\n                    <img class="modal__img" src="${a}" alt="${e}">\n                </div>\n                <div class="modal__about-movie">\n                    <h3 class="modal__title" data-id="${t}">${e}</h3>\n                    <div class="modal__text-wrap">\n                        <ul>\n                            <li class="modal__text-characteristic">Vote / Votes</li>\n                            <li class="modal__text-characteristic-value"><span class="vote average">${o}</span> / <span class="vote count">${c}</span></li>\n                        </ul>\n                        <ul>\n                            <li class="modal__text-characteristic">Popularity</li>\n                            <li class="modal__text-characteristic-value">${d}</li>\n                        </ul>\n                        <ul>\n                            <li class="modal__text-characteristic">Original Title</li>\n                            <li class="modal__text-characteristic-value">${e}</li>\n                        </ul>\n                        <ul>\n                            <li class="modal__text-characteristic">Genre</li>\n                            <li class="modal__text-characteristic-value">${u}</li>\n                        </ul>\n                    </div>\n                    <div class="modal__overview-wrap">\n                        <h3 class="modal__overview-title">About</h3>\n                        <p class="modal__overview-text">${n}</p>\n                    </div>\n                    <div class="modal__btn-wrap">\n                        <button class="modal__btn w" type="button">add to Watched</button>\n                        <button class="modal__btn q" type="button">add to queue</button>\n                    </div>\n                </div>\n            </div>\n      `;i(".modal__window").innerHTML=_}(t)})),document.addEventListener("keydown",r),i(".backdrop").classList.remove("is-hidden"),i("body").classList.add("no-scroll");var e})),i(".modal__btn-close").addEventListener("click",s),i(".backdrop").addEventListener("click",(function(t){t.currentTarget===t.target&&s()}));const o=t=>document.querySelector(t);let c=1;function l(){const t=o(".pagination__btn-wrap").firstElementChild,e=o(".pagination__btn-wrap").lastElementChild,n=Number(t.dataset.index)-1,a=n+1;if(t.classList.contains("current-page")&&0!==Number(t.dataset.index)){e.remove();const t=`<button class="pagination__btn num" tupe="button" data-index="${n}">${a}</button>`;o(".pagination__btn-wrap").insertAdjacentHTML("afterbegin",t)}}function d(){const t=o(".pagination__btn-wrap").firstElementChild,e=o(".pagination__btn-wrap").lastElementChild,n=Number(e.dataset.index)+1,a=Number(n)+Number(1);if(e.classList.contains("current-page")){t.remove();const e=`<button class="pagination__btn num" tupe="button" data-index="${n}">${a}</button>`;o(".pagination__btn-wrap").insertAdjacentHTML("beforeend",e)}}function u(){1===Number(c)?o(".pagination__btn.prev").classList.add("not-active"):o(".pagination__btn.prev").classList.remove("not-active")}o(".pagination__btn-wrap").addEventListener("click",(function(t){o(".gallery").innerHTML="";const e=document.querySelector(".current-page");e&&e.classList.remove("current-page");t.target.classList.add("current-page"),c=t.target.textContent,u(),l(),d(),n(c)})),o(".pagination__btn.prev").addEventListener("click",(function(){o(".gallery").innerHTML="";const t=document.querySelector(".current-page");t&&t.classList.remove("current-page");t.previousElementSibling.classList.add("current-page"),c-=1,u(),l(),n(c)})),o(".pagination__btn.next").addEventListener("click",(function(){o(".gallery").innerHTML="";const t=document.querySelector(".current-page");t&&t.classList.remove("current-page");t.nextElementSibling.classList.add("current-page");const e=Number(c)+1;d(),n(e)}));
//# sourceMappingURL=library.4b8ffa6b.js.map
