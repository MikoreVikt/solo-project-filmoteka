let e;function t(){return fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=14ce8915ef52d801924d89668f2ca827").then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>e.status))}function n(e,t){e.forEach((e=>{const n=e.genre_ids.map((e=>{const n=t.find((t=>t.id===e));return n?n.name:"Unknown"}));e.genres=n.length<3?n.join(", "):`${n[0]}, ${n[1]} and other`}))}function a(t){return t.map((({id:t,poster_path:n,original_title:a,release_date:r,genres:o})=>{const i=r.slice(0,4);e="https://image.tmdb.org/t/p/original"+n;const c=`\n        <li class="item" data-id="${t}">\n            <a class="item__link" href="">\n            <div class="item__img-frame">\n                <img\n                class="item__img"\n                data-id="${t}"\n                src=${e}\n                alt="${a}"\n                loading="lazy"\n                />\n            </div>\n            <div class="item__text-frame">\n                <h3 class="item__text title">${a}</h3>\n                <h3 class="item__text">${o} | ${i}</h3>\n            </div>\n            </a>\n        </li>`;var s;(s=".gallery",document.querySelector(s)).insertAdjacentHTML("beforeend",c)})).join("")}async function r(e){e=localStorage.getItem("current-page-number")?localStorage.getItem("current-page-number"):1;const r=await t().then((e=>e.genres)),o=await(i=e,fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=14ce8915ef52d801924d89668f2ca827&page=${i}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>e.status))).then((e=>e.results));var i;n(o,r),a(o)}r(1);let o;const i=e=>document.querySelector(e);i(".search-form").addEventListener("submit",(async function(e){if(e.preventDefault(),i(".gallery").innerHTML="",""===i(".search-form").elements.search.value)return;o=i(".search-form").elements.search.value;const r=await t().then((e=>e.genres)),c=await(s=void 0,l=o,fetch(`https://api.themoviedb.org/3/search/movie?api_key=14ce8915ef52d801924d89668f2ca827&query=${l}&page=${s}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>e.status))).then((e=>e.results));var s,l;n(c,r),a(c)}));let c;const s=e=>document.querySelector(e);function l(){document.removeEventListener("keydown",u),s(".backdrop").classList.add("is-hidden"),s("body").classList.remove("no-scroll"),s(".modal__window").innerHTML=""}function u(e){"Escape"===e.code&&l()}s(".gallery").addEventListener("click",(function(e){if(e.preventDefault(),!e.target.closest("li")&&!e.target.classList.contains("item")||e.target.classList.contains("gallery"))return;(t=e.target.closest("li").dataset.id,fetch(`https://api.themoviedb.org/3/movie/${t}?api_key=14ce8915ef52d801924d89668f2ca827`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>console.log(e)))).then((e=>{!function({id:e,original_title:t,overview:n,poster_path:a,popularity:r,vote_average:o,vote_count:i,genres:l}){c="https://image.tmdb.org/t/p/original"+a;const u=Math.round(r),d=l.map((e=>e.name)).join(", "),m=`\n            <div class="modal__container">\n                <div class="modal__img-wrap">\n                    <img class="modal__img" src="${c}" alt="${t}">\n                </div>\n                <div class="modal__about-movie">\n                    <h3 class="modal__title" data-id="${e}">${t}</h3>\n                    <div class="modal__text-wrap">\n                        <ul>\n                            <li class="modal__text-characteristic">Vote / Votes</li>\n                            <li class="modal__text-characteristic-value"><span class="vote average">${o}</span> / <span class="vote count">${i}</span></li>\n                        </ul>\n                        <ul>\n                            <li class="modal__text-characteristic">Popularity</li>\n                            <li class="modal__text-characteristic-value">${u}</li>\n                        </ul>\n                        <ul>\n                            <li class="modal__text-characteristic">Original Title</li>\n                            <li class="modal__text-characteristic-value">${t}</li>\n                        </ul>\n                        <ul>\n                            <li class="modal__text-characteristic">Genre</li>\n                            <li class="modal__text-characteristic-value">${d}</li>\n                        </ul>\n                    </div>\n                    <div class="modal__overview-wrap">\n                        <h3 class="modal__overview-title">About</h3>\n                        <p class="modal__overview-text">${n}</p>\n                    </div>\n                    <div class="modal__btn-wrap">\n                        <button class="modal__btn w" type="button">add to Watched</button>\n                        <button class="modal__btn q" type="button">add to queue</button>\n                    </div>\n                </div>\n            </div>\n      `;s(".modal__window").innerHTML=m}(e)})),document.addEventListener("keydown",u),s(".backdrop").classList.remove("is-hidden"),s("body").classList.add("no-scroll");var t})),s(".modal__btn-close").addEventListener("click",l),s(".backdrop").addEventListener("click",(function(e){e.currentTarget===e.target&&l()}));const d=e=>document.querySelector(e);let m;window.addEventListener("scroll",(function(){Math.round(document.documentElement.scrollTop)>230?m=setTimeout((()=>{setTimeout((()=>{Math.round(document.documentElement.scrollTop)>230&&d(".scroll__btn").classList.remove("is-hidden")}),1)}),1e3):(d(".scroll__btn").classList.add("is-hidden"),clearTimeout(m))})),d(".scroll__btn").addEventListener("click",(function(){d(".scroll__btn").classList.add("is-hidden"),document.documentElement.scrollTop>0&&window.scrollTo({top:0,left:0,behavior:"smooth"})}));const g=e=>document.querySelector(e);let p=Number(localStorage.getItem("current-page-number"))||1;function _(){const e=g(".pagination__btn-wrap").firstElementChild,t=g(".pagination__btn-wrap").lastElementChild,n=Number(e.dataset.index)-1,a=n+1;if(e.classList.contains("current-page")&&0!==Number(e.dataset.index)){t.remove();const e=`<button class="pagination__btn num" tupe="button" data-index="${n}">${a}</button>`;g(".pagination__btn-wrap").insertAdjacentHTML("afterbegin",e)}}function b(){const e=g(".pagination__btn-wrap").firstElementChild,t=g(".pagination__btn-wrap").lastElementChild,n=Number(t.dataset.index)+1,a=Number(n)+Number(1);if(t.classList.contains("current-page")){e.remove();const t=`<button class="pagination__btn num" tupe="button" data-index="${n}">${a}</button>`;g(".pagination__btn-wrap").insertAdjacentHTML("beforeend",t)}}function v(e){1===Number(e)?g(".pagination__btn.prev").classList.add("not-active"):g(".pagination__btn.prev").classList.remove("not-active")}function h(){const e=localStorage.getItem("current-page-number"),t=document.querySelectorAll(".pagination__btn.num"),n=document.querySelector(".current-page"),a=[...t].find((t=>Number(t.textContent)===Number(e)));n&&a&&(n.classList.remove("current-page"),a.classList.add("current-page"))}g(".pagination__btn-wrap").addEventListener("click",(function(e){g(".gallery").innerHTML="";const t=document.querySelector(".current-page");t&&t.classList.remove("current-page");e.target.classList.add("current-page"),p=e.target.textContent,localStorage.setItem("current-page-number",p),v(Number(localStorage.getItem("current-page-number"))||1),_(),b(),h(),r(Number(localStorage.getItem("current-page-number"))||1)})),g(".pagination__btn.prev").addEventListener("click",(function(){g(".gallery").innerHTML="";const e=document.querySelector(".current-page")||Number(localStorage.getItem("current-page-number"));e&&e.classList.remove("current-page");if(Number(e.textContent)!==Number(1)){const t=Number(e.textContent)-1;localStorage.setItem("current-page-number",t),e.previousElementSibling.classList.add("current-page")}else{const t=1;localStorage.setItem("current-page-number",t),e.classList.add("current-page")}v(Number(localStorage.getItem("current-page-number"))||1),_(),h(),r(Number(localStorage.getItem("current-page-number"))||1)})),g(".pagination__btn.next").addEventListener("click",(function(){g(".gallery").innerHTML="";const e=document.querySelector(".current-page")||Number(localStorage.getItem("current-page-number"));e&&e.classList.remove("current-page");e.nextElementSibling.classList.add("current-page");const t=Number(e.textContent)+1;localStorage.setItem("current-page-number",t),v(Number(localStorage.getItem("current-page-number"))||1),b(),h(),r(Number(localStorage.getItem("current-page-number"))||1)})),h(),v(p);
//# sourceMappingURL=library.1ede9b81.js.map
