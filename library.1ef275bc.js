let e;function t(t){return t.map((({id:t,poster_path:n,original_title:a,release_date:r,genres:o})=>{const i=r.slice(0,4);e="https://image.tmdb.org/t/p/original"+n;const c=`\n        <li class="item" data-id="${t}">\n            <a class="item__link" href="">\n            <div class="item__img-frame">\n                <img\n                class="item__img"\n                data-id="${t}"\n                src=${e}\n                alt="${a}"\n                loading="lazy"\n                />\n            </div>\n            <div class="item__text-frame">\n                <h3 class="item__text title">${a}</h3>\n                <h3 class="item__text">${o} | ${i}</h3>\n            </div>\n            </a>\n        </li>`;var s;(s=".gallery",document.querySelector(s)).insertAdjacentHTML("beforeend",c)})).join("")}async function n(e){e=localStorage.getItem("current-page-number")?localStorage.getItem("current-page-number"):1;const n=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=14ce8915ef52d801924d89668f2ca827").then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>e.status)).then((e=>e.genres)),a=await(r=e,fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=14ce8915ef52d801924d89668f2ca827&page=${r}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>e.status))).then((e=>e.results));var r;!function(e,t){e.forEach((e=>{const n=e.genre_ids.map((e=>{const n=t.find((t=>t.id===e));return n?n.name:"Unknown"}));e.genres=n.length<3?n.join(", "):`${n[0]}, ${n[1]} and other`}))}(a,n),t(a)}n(1);let a;const r=e=>document.querySelector(e);function o(){document.removeEventListener("keydown",i),r(".backdrop").classList.add("is-hidden"),r("body").classList.remove("no-scroll"),r(".modal__window").innerHTML=""}function i(e){"Escape"===e.code&&o()}r(".gallery").addEventListener("click",(function(e){if(e.preventDefault(),!e.target.closest("li")&&!e.target.classList.contains("item")||e.target.classList.contains("gallery"))return;(t=e.target.closest("li").dataset.id,fetch(`https://api.themoviedb.org/3/movie/${t}?api_key=14ce8915ef52d801924d89668f2ca827`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>console.log(e)))).then((e=>{!function({id:e,original_title:t,overview:n,poster_path:o,popularity:i,vote_average:c,vote_count:s,genres:l}){a="https://image.tmdb.org/t/p/original"+o;const d=Math.round(i),u=l.map((e=>e.name)).join(", "),m=`\n            <div class="modal__container">\n                <div class="modal__img-wrap">\n                    <img class="modal__img" src="${a}" alt="${t}">\n                </div>\n                <div class="modal__about-movie">\n                    <h3 class="modal__title" data-id="${e}">${t}</h3>\n                    <div class="modal__text-wrap">\n                        <ul>\n                            <li class="modal__text-characteristic">Vote / Votes</li>\n                            <li class="modal__text-characteristic-value"><span class="vote average">${c}</span> / <span class="vote count">${s}</span></li>\n                        </ul>\n                        <ul>\n                            <li class="modal__text-characteristic">Popularity</li>\n                            <li class="modal__text-characteristic-value">${d}</li>\n                        </ul>\n                        <ul>\n                            <li class="modal__text-characteristic">Original Title</li>\n                            <li class="modal__text-characteristic-value">${t}</li>\n                        </ul>\n                        <ul>\n                            <li class="modal__text-characteristic">Genre</li>\n                            <li class="modal__text-characteristic-value">${u}</li>\n                        </ul>\n                    </div>\n                    <div class="modal__overview-wrap">\n                        <h3 class="modal__overview-title">About</h3>\n                        <p class="modal__overview-text">${n}</p>\n                    </div>\n                    <div class="modal__btn-wrap">\n                        <button class="modal__btn w" type="button">add to Watched</button>\n                        <button class="modal__btn q" type="button">add to queue</button>\n                    </div>\n                </div>\n            </div>\n      `;r(".modal__window").innerHTML=m}(e)})),document.addEventListener("keydown",i),r(".backdrop").classList.remove("is-hidden"),r("body").classList.add("no-scroll");var t})),r(".modal__btn-close").addEventListener("click",o),r(".backdrop").addEventListener("click",(function(e){e.currentTarget===e.target&&o()}));const c=e=>document.querySelector(e);let s;window.addEventListener("scroll",(function(){Math.round(document.documentElement.scrollTop)>230?s=setTimeout((()=>{setTimeout((()=>{Math.round(document.documentElement.scrollTop)>230&&c(".scroll__btn").classList.remove("is-hidden")}),1)}),1e3):(c(".scroll__btn").classList.add("is-hidden"),clearTimeout(s))})),c(".scroll__btn").addEventListener("click",(function(){c(".scroll__btn").classList.add("is-hidden"),document.documentElement.scrollTop>0&&window.scrollTo({top:0,left:0,behavior:"smooth"})}));const l=e=>document.querySelector(e);let d=Number(localStorage.getItem("current-page-number"))||1;function u(){const e=l(".pagination__btn-wrap").firstElementChild,t=l(".pagination__btn-wrap").lastElementChild,n=Number(e.dataset.index)-1,a=n+1;if(e.classList.contains("current-page")&&0!==Number(e.dataset.index)){t.remove();const e=`<button class="pagination__btn num" tupe="button" data-index="${n}">${a}</button>`;l(".pagination__btn-wrap").insertAdjacentHTML("afterbegin",e)}}function m(){const e=l(".pagination__btn-wrap").firstElementChild,t=l(".pagination__btn-wrap").lastElementChild,n=Number(t.dataset.index)+1,a=Number(n)+Number(1);if(t.classList.contains("current-page")){e.remove();const t=`<button class="pagination__btn num" tupe="button" data-index="${n}">${a}</button>`;l(".pagination__btn-wrap").insertAdjacentHTML("beforeend",t)}}function g(e){1===Number(e)?l(".pagination__btn.prev").classList.add("not-active"):l(".pagination__btn.prev").classList.remove("not-active")}function _(){const e=localStorage.getItem("current-page-number"),t=document.querySelectorAll(".pagination__btn.num"),n=document.querySelector(".current-page"),a=[...t].find((t=>Number(t.textContent)===Number(e)));n&&a&&(n.classList.remove("current-page"),a.classList.add("current-page"))}l(".pagination__btn-wrap").addEventListener("click",(function(e){l(".gallery").innerHTML="";const t=document.querySelector(".current-page");t&&t.classList.remove("current-page");e.target.classList.add("current-page"),d=e.target.textContent,localStorage.setItem("current-page-number",d),g(Number(localStorage.getItem("current-page-number"))||1),u(),m(),_(),n(Number(localStorage.getItem("current-page-number"))||1)})),l(".pagination__btn.prev").addEventListener("click",(function(){l(".gallery").innerHTML="";const e=document.querySelector(".current-page")||Number(localStorage.getItem("current-page-number"));e&&e.classList.remove("current-page");e.previousElementSibling.classList.add("current-page");const t=Number(e.textContent)-1;localStorage.setItem("current-page-number",t),g(Number(localStorage.getItem("current-page-number"))||1),u(),_(),n(Number(localStorage.getItem("current-page-number"))||1)})),l(".pagination__btn.next").addEventListener("click",(function(){l(".gallery").innerHTML="";const e=document.querySelector(".current-page")||Number(localStorage.getItem("current-page-number"));e&&e.classList.remove("current-page");e.nextElementSibling.classList.add("current-page");const t=Number(e.textContent)+1;localStorage.setItem("current-page-number",t),g(Number(localStorage.getItem("current-page-number"))||1),m(),_(),n(Number(localStorage.getItem("current-page-number"))||1)})),_(),g(d);
//# sourceMappingURL=library.1ef275bc.js.map
